extends ../layout

block body
	if post
		.row
			.col-xs-7
				h1 #{post.title} #[small.secondary-text= date(post.createdAt)]
				h4 By #[a(href=`mailto:${post.user.email}`)= post.user.name]
				p= post.body
				if post.imageFilename
					p: img(src=post.imageThumbnailUrl)
			.col-xs-5
				.panel.panel-default
					.panel-heading
						h3.panel-title.collapse-comments-panel Comments #[span.caret]
					.panel-body.collapse.comments-panel
						include ../errors
						form(action=`${post.url}/comments`, method='post')
							.form-group
								label(for='author') Author
								input.form-control(name='author', value=comment.author)
							.form-group
								label(for='body') Body
								textarea.form-control(name='body')= comment.body
							.form-group
								input.btn.btn-primary.btn-lg(type='submit', value='Create')
					ul.list-group.collapse.comments-panel
						each comment in post.comments
							li.list-group-item
								h4.list-group-item-heading #{comment.author} #[small= date(comment.createdAt)]
								p.list-group-item-text= comment.body
	else
		h2 Not Found
		p That blog post does not exist.
